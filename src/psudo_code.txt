>> Download the Chrome OS Image using hard coded link <<

$URL = https://dl.google.com/dl/edgedl/chromeos/recovery/chromeos_14526.57.0_nocturne_recovery_stable-channel_mp.bin.zip
$URL_SHA1 = 6745c05f28e5d9ca574c385d7057327debbe7225

$URL_File_Name = chromeos_14526.57.0_nocturne_recovery_stable-channel_mp.bin.zip

>> Check OS Image by comparing the SHA1 values <<

wget >>> download 

sha1sum >>> to get the sha1 of the file and then compare it using some if else statement.

>> Extract the downloaded .zip file and mount .bin to /mnt/chromeos <<

>> Make a new folder to in the current folder to copy arm libs <<

mkdir cros_vendor

if already exist clean-up the folder.

>>> copy files from the /mnt/chromeos to the cros_vendor <<<

> first check if the image has arm & arm64 folders if yes then say the image has both arm & arm64 files.

if only arm is found then say image only has arm files.

**
bin/houdini
bin/houdini64
etc/binfmt_misc/
lib/libhoudini.so
lib/arm/
lib64/libhoudini.so
lib64/arm64/

**
# Folder structure should be same as chromeos image.


# Create init script in the cros_vendor folder

mkdir -p "cros_vendor/etc/init"

cat > "$TARGET_DIR/houdini/etc/init/houdini.rc" <<EOF

# Enable native bridge for target executables

on early-init
    mount binfmt_misc binfmt_misc /proc/sys/fs/binfmt_misc
on property:ro.enable.native.bridge.exec=1
    copy /system/etc/binfmt_misc/arm_exe /proc/sys/fs/binfmt_misc/register
    copy /system/etc/binfmt_misc/arm_dyn /proc/sys/fs/binfmt_misc/register
on property:ro.enable.native.bridge.exec64=1
    copy /system/etc/binfmt_misc/arm64_exe /proc/sys/fs/binfmt_misc/register
    copy /system/etc/binfmt_misc/arm64_dyn /proc/sys/fs/binfmt_misc/register


EOF


>> Copy widewine files <<

vendor/bin/hw/android.hardware.drm@1.1-service.widevine
vendor/etc/init/android.hardware.drm@1.1-service.widevine.rc
vendor/lib/libwvhidl.so


Replace the current / dummy cpuinfo with the following attached with this file.

for arm & arm64 we can use the same cpuinfo but for cpuinfo.pure32 we need a different file


<< END >>